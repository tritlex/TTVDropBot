{
  "version": 3,
  "sources": ["../../../build/Pages/loginPage.js"],
  "sourcesContent": ["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Login = void 0;\nconst chalk_1 = __importDefault(require(\"chalk\"));\nconst index_1 = require(\"../index\");\nconst winston = require(\"winston\");\nconst fs = require(\"fs\");\nconst inputReader = require(\"wait-console-input\");\nconst puppeteer = require('puppeteer-core');\nfunction Login() {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield puppeteer.launch({ headless: false, executablePath: index_1.userdata.settings.Chromeexe, userDataDir: index_1.userdata.settings.UserDataPath, args: ['--no-sandbox'] }).then((browser) => __awaiter(this, void 0, void 0, function* () {\n            //Open Login Page\n            const loginpage = yield browser.newPage();\n            yield loginpage.setDefaultTimeout(0);\n            //Set Cookies if found for Autologin\n            if (index_1.userdata.settings.UserDataPath === \"\" && fs.existsSync('./twitch-session.json')) {\n                let file = fs.readFileSync('./twitch-session.json', 'utf8');\n                let cokkies = yield JSON.parse(file);\n                yield loginpage.setCookie.apply(loginpage, cokkies);\n            }\n            //Goto Login Page\n            winston.silly(\" \");\n            winston.info(chalk_1.default.gray(\"Starting Login Page...\"));\n            yield loginpage.goto(index_1.userdata.loginpageurl, { waitUntil: \"networkidle2\" });\n            yield loginpage.waitForNavigation().then(() => __awaiter(this, void 0, void 0, function* () {\n                if (loginpage.url() !== 'https://www.twitch.tv/?no-reload=true') {\n                    if (!index_1.userdata.settings.displayless)\n                        inputReader.wait(chalk_1.default.gray(\"Press any Key to continue...\"));\n                    process.exit(22);\n                }\n                winston.silly(\" \");\n                winston.info(chalk_1.default.green(\"Success Login...\"));\n                //Save Cookies\n                winston.silly(\" \");\n                winston.info(chalk_1.default.gray(\"Saving Cookies...\"));\n                index_1.userdata.cookies = yield loginpage.cookies();\n                yield fs.promises.writeFile('twitch-session.json', JSON.stringify(index_1.userdata.cookies, null, 2)).then(function () {\n                    winston.silly(\" \");\n                    winston.info(chalk_1.default.green(\"Successfully Saved Cookies...\"));\n                    winston.silly(\" \");\n                }).catch((err) => { throw err; });\n            }));\n            //Close Browser\n            winston.silly(\" \");\n            winston.info(chalk_1.default.gray(\"Closing Browser and Moving on...\"));\n            yield browser.close();\n        }));\n    });\n}\nexports.Login = Login;\n"],
  "mappings": ";AACA,IAAI,YAAa,WAAQ,QAAK,aAAc,SAAU,SAAS,YAAY,GAAG,WAAW;AACrF,iBAAe,OAAO;AAAE,WAAO,iBAAiB,IAAI,QAAQ,IAAI,EAAE,SAAU,SAAS;AAAE,cAAQ;AAAA;AAAA;AAC/F,SAAO,IAAK,MAAM,KAAI,UAAU,SAAU,SAAS,QAAQ;AACvD,uBAAmB,OAAO;AAAE,UAAI;AAAE,aAAK,UAAU,KAAK;AAAA,eAAkB,GAAP;AAAY,eAAO;AAAA;AAAA;AACpF,sBAAkB,OAAO;AAAE,UAAI;AAAE,aAAK,UAAU,SAAS;AAAA,eAAkB,GAAP;AAAY,eAAO;AAAA;AAAA;AACvF,kBAAc,QAAQ;AAAE,aAAO,OAAO,QAAQ,OAAO,SAAS,MAAM,OAAO,OAAO,KAAK,WAAW;AAAA;AAClG,SAAM,aAAY,UAAU,MAAM,SAAS,cAAc,KAAK;AAAA;AAAA;AAGtE,IAAI,kBAAmB,WAAQ,QAAK,mBAAoB,SAAU,KAAK;AACnE,SAAQ,OAAO,IAAI,aAAc,MAAM,EAAE,WAAW;AAAA;AAExD,OAAO,eAAe,SAAS,cAAc,EAAE,OAAO;AACtD,QAAQ,QAAQ;AAChB,MAAM,UAAU,gBAAgB,QAAQ;AACxC,MAAM,UAAU,QAAQ;AACxB,MAAM,UAAU,QAAQ;AACxB,MAAM,KAAK,QAAQ;AACnB,MAAM,cAAc,QAAQ;AAC5B,MAAM,YAAY,QAAQ;AAC1B,iBAAiB;AACb,SAAO,UAAU,MAAM,QAAQ,QAAQ,aAAa;AAChD,UAAM,UAAU,OAAO,EAAE,UAAU,OAAO,gBAAgB,QAAQ,SAAS,SAAS,WAAW,aAAa,QAAQ,SAAS,SAAS,cAAc,MAAM,CAAC,mBAAmB,KAAK,CAAC,YAAY,UAAU,MAAM,QAAQ,QAAQ,aAAa;AAEzO,YAAM,YAAY,MAAM,QAAQ;AAChC,YAAM,UAAU,kBAAkB;AAElC,UAAI,QAAQ,SAAS,SAAS,iBAAiB,MAAM,GAAG,WAAW,0BAA0B;AACzF,YAAI,OAAO,GAAG,aAAa,yBAAyB;AACpD,YAAI,UAAU,MAAM,KAAK,MAAM;AAC/B,cAAM,UAAU,UAAU,MAAM,WAAW;AAAA;AAG/C,cAAQ,MAAM;AACd,cAAQ,KAAK,QAAQ,QAAQ,KAAK;AAClC,YAAM,UAAU,KAAK,QAAQ,SAAS,cAAc,EAAE,WAAW;AACjE,YAAM,UAAU,oBAAoB,KAAK,MAAM,UAAU,MAAM,QAAQ,QAAQ,aAAa;AACxF,YAAI,UAAU,UAAU,yCAAyC;AAC7D,cAAI,CAAC,QAAQ,SAAS,SAAS;AAC3B,wBAAY,KAAK,QAAQ,QAAQ,KAAK;AAC1C,kBAAQ,KAAK;AAAA;AAEjB,gBAAQ,MAAM;AACd,gBAAQ,KAAK,QAAQ,QAAQ,MAAM;AAEnC,gBAAQ,MAAM;AACd,gBAAQ,KAAK,QAAQ,QAAQ,KAAK;AAClC,gBAAQ,SAAS,UAAU,MAAM,UAAU;AAC3C,cAAM,GAAG,SAAS,UAAU,uBAAuB,KAAK,UAAU,QAAQ,SAAS,SAAS,MAAM,IAAI,KAAK,WAAY;AACnH,kBAAQ,MAAM;AACd,kBAAQ,KAAK,QAAQ,QAAQ,MAAM;AACnC,kBAAQ,MAAM;AAAA,WACf,MAAM,CAAC,QAAQ;AAAE,gBAAM;AAAA;AAAA;AAG9B,cAAQ,MAAM;AACd,cAAQ,KAAK,QAAQ,QAAQ,KAAK;AAClC,YAAM,QAAQ;AAAA;AAAA;AAAA;AAI1B,QAAQ,QAAQ;",
  "names": []
}
