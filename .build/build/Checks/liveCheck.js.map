{
  "version": 3,
  "sources": ["../../../build/Checks/liveCheck.js"],
  "sourcesContent": ["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.customallOfflineCheck = exports.allOfflineCheck = exports.liveCheck = void 0;\nconst winston_1 = __importDefault(require(\"winston\"));\nconst chalk_1 = __importDefault(require(\"chalk\"));\nconst restartHandler_1 = require(\"../functions/handler/restartHandler\");\nconst util_1 = require(\"../utils/util\");\nconst index_1 = require(\"../index\");\nconst custompageHandler_1 = require(\"../functions/handler/custompageHandler\");\nconst TwitchGQL = require(\"@zaarrg/twitch-gql-ttvdropbot\").Init();\nfunction liveCheck(channelLogin, custom) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (channelLogin !== undefined) {\n            let status = yield TwitchGQL.GetLiveStatus(channelLogin);\n            if (!status) {\n                winston_1.default.info(chalk_1.default.red('Current Channel offline... Looking for new one...'), { event: \"offline\" });\n                if (custom) {\n                    yield (0, custompageHandler_1.customrestartHandler)(true);\n                }\n                else {\n                    yield (0, restartHandler_1.restartHandler)(true, true, true, true, false);\n                }\n            }\n        }\n        else {\n            winston_1.default.info(chalk_1.default.red('No Channel Live at the moment for this Drop... Looking for new one...'), { event: \"offline\" });\n            if (custom) {\n                yield (0, custompageHandler_1.customrestartHandler)(true);\n            }\n            else {\n                yield (0, restartHandler_1.restartHandler)(true, true, true, true, false);\n            }\n        }\n    });\n}\nexports.liveCheck = liveCheck;\nfunction allOfflineCheck() {\n    return __awaiter(this, void 0, void 0, function* () {\n        let dropsoffline = 0;\n        index_1.userdata.drops.forEach(drop => {\n            if (!drop.live) {\n                dropsoffline++;\n            }\n        });\n        if (dropsoffline === index_1.userdata.drops.length) {\n            if (index_1.userdata.settings.WaitforChannels && index_1.userdata.settings.Prioritylist.length === 0) {\n                winston_1.default.silly(\" \");\n                winston_1.default.info(chalk_1.default.red('All Drops for this game are offline... Looking for new live Channels in 5 minutes...'), { event: \"offline\" });\n                winston_1.default.silly(' ', { event: \"progressEnd\" });\n                yield (0, util_1.delay)(300000);\n                yield (0, restartHandler_1.restartHandler)(true, true, true, true, false);\n            }\n            else {\n                winston_1.default.silly(\" \");\n                if (index_1.userdata.settings.Prioritylist.length === 0)\n                    winston_1.default.warn(chalk_1.default.yellow('Warning: Please add Games to your Priority List, otherwise the bot will select a random game... or disable this feature in the settings...'));\n                winston_1.default.info(chalk_1.default.red('All Drops for this game are offline... Looking for new game...'), { event: \"newGame\" });\n                yield (0, restartHandler_1.restartHandler)(true, true, true, true, true);\n            }\n        }\n    });\n}\nexports.allOfflineCheck = allOfflineCheck;\nfunction customallOfflineCheck() {\n    return __awaiter(this, void 0, void 0, function* () {\n        let dropsoffline = 0;\n        index_1.userdata.customchannel.forEach(drop => {\n            if (!drop.live) {\n                dropsoffline++;\n            }\n        });\n        if (dropsoffline === index_1.userdata.customchannel.length) {\n            winston_1.default.silly(\" \");\n            winston_1.default.info(chalk_1.default.red('All Channels are offline... Looking for new live Channels in 5 minutes...'), { event: \"offline\" });\n            winston_1.default.silly(' ', { event: \"progressEnd\" });\n            yield (0, util_1.delay)(300000);\n            yield (0, custompageHandler_1.customrestartHandler)(true);\n        }\n    });\n}\nexports.customallOfflineCheck = customallOfflineCheck;\n"],
  "mappings": "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",
  "names": []
}
